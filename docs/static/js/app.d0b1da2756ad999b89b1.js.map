{"version":3,"sources":["webpack:///./src/App.vue?8ddf","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/UploadBt.vue","webpack:///./src/components/UploadBt.vue?d4e0","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/UploadBt.vue","webpack:///./src/components/HelloWorld.vue?3991","webpack:///./src/components/HelloWorld.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","UploadBt","FileReader","file","result","String","components_UploadBt","ref","staticClass","type","accept","on","change","handleFileChange","_v","style","padding","pad","for","HelloWorld","UploadButton","UploadBt_normalizeComponent","undefined","_imgfile","offsetHeight","height","width","offsetWidth","fontsize","alpha","stroke","fontweight","fontfamily","color","shadow","initTextX","initTextY","value","draw","scaleRatio","ratio","index","offsetX","offsetY","draggable","initX","components_HelloWorld","_vm","mouseup","$event","click","selected","mousemove","drag","imgfile","_e","staticStyle","position","fileChange","arguments","_l","item","top","left","placeholder","onfocus","stopPropagation","select","input","handleTextInput","mousedown","dragBegin","disabled","addText","removeText","handleInput","target","clearImg","drawImg","name","checked","min","step","max","_m","href","src_components_HelloWorld","HelloWorld_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","path","component","config","productionTip","el","template","components","App"],"mappings":"iKAGAA,GADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,oBCuBjBC,EAtBAC,EAAA,OAaAC,OCPA,ODSAZ,GATA,EATA,SAAAa,GACAF,EAAA,SAYA,KAEA,MAUA,oBEjBAG,kCAKA,2CAIAX,wCAIAY,2BAEAC,yCAGAC,aACA,oEAIA,2BACAD,gBAKAE,SClCAC,GADiBlB,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,QAAAA,EAAA,SAA8Be,IAAA,QAAAC,YAAA,YAAAd,OAA2Ce,KAAA,OAAAd,GAAA,OAAAe,OAAA,+CAAiFC,IAAKC,OAA9NtB,KAA8NuB,oBAA9NvB,KAA6PwB,GAAA,KAAAtB,EAAA,SAA0BuB,OAAQC,QAA/R1B,KAA+R2B,KAAgBvB,OAASwB,IAAA,UAAxT5B,KAAsUwB,GAAA,aAE/UlB,oBC+BjBuB,eAIAC,aClCAtB,EAAA,OAaAuB,CACApB,EACAK,GATA,EATA,SAAAN,GACAF,EAAA,SAYA,kBAEA,MAUA,cDaA,wCAGA,oBAEA,wBAEA,qDAIAwB,MACA,wBAGA,SACA,UACA,aACA,eACA,uDACA,SACA,kBACA,kBAEA,eAGA,wBAEA,UACA,aACA,eACA,qDACA,kBAEA,qCAKAhC,wCAIAY,2BAGAqB,kIAOAC,yBACAC,0BACAC,0BACAD,4CAGA,mGAEA,6CACA,iDACA,kDACA,4BAEA,4CACAE,qDACA,6CACA,iDACA,kDACA,6CAEA,wEAQAC,oBACAC,kBACAC,uBACAC,2BACAC,mBACA,cACAC,kBACAC,YACA,WACA,cACAC,iBAEAC,+CAGAC,wEAEAA,WACAA,OACAC,wGAKA,kBACA,OACAA,oDAKAA,0DAGA,aACAC,2BACAb,sBACAD,yBACAA,0BACA,sDAEAI,iDACAG,0BACA,uBACA,mCACA,kBACA,qCAGA,qCACA,mBACA,oBAEAC,uCACAO,8BAGA,qCACA,mBACA,kBAEAP,qCACAO,YAIA,4CAGAC,0CAGAA,eACAC,qBACAC,gEAGA,2BACAC,uCACA,gCACA,wBACAC,+BACA,QACAP,0DAIAD,WACAC,uDAGA,aACAC,2BACAb,sBACAD,yBACAA,sDAEAI,iDACAG,0BACA,uBACA,mCACA,kBACA,qCAGA,qCACA,mBACA,oBAEAC,uCACAO,8BAGA,qCACA,mBACA,kBAEAP,qCACAO,SE3OAM,GADiB1D,OAFjB,WAA0B,IAAA2D,EAAAzD,KAAaD,EAAA0D,EAAAxD,eAA0BC,EAAAuD,EAAAtD,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBgB,YAAA,YAAAG,IAA4BqC,QAAA,SAAAC,GAA2BF,EAAAH,WAAA,MAAwBpD,EAAA,OAAYe,IAAA,UAAAC,YAAA,cAAAG,IAA4CuC,MAAA,SAAAD,GAAyBF,EAAAI,UAAA,MAAuB3D,EAAA,UAAee,IAAA,KAAAb,OAAgBC,GAAA,aAAiBgB,IAAKyC,UAAAL,EAAAM,QAAsBN,EAAAjC,GAAA,KAAAiC,EAAAO,QAAwKP,EAAAQ,KAAxK/D,EAAA,gBAAgDgE,aAAaC,SAAA,YAAsB/D,OAAQuB,IAAA,QAAaN,IAAK+C,WAAA,SAAAT,GAA8BF,EAAAO,QAAAK,UAAA,OAA6BZ,EAAAjC,GAAA,KAAAiC,EAAAa,GAAAb,EAAA,mBAAAc,EAAApB,GAAmE,OAAAM,EAAA,QAAAvD,EAAA,SAAiCuB,OAAQ+C,IAAAD,EAAAC,IAAAC,KAAAF,EAAAE,MAAiCrE,OAASe,KAAA,OAAAuD,YAAA,SAAAC,QAAA,kCAAgFtD,IAAKuC,MAAA,SAAAD,GAAyBA,EAAAiB,kBAAyBnB,EAAAoB,OAAA1B,IAAkB2B,MAAA,SAAAnB,GAA0BF,EAAAsB,gBAAAR,EAAAZ,IAAiCqB,UAAA,SAAArB,GAA8BF,EAAAwB,UAAA9B,EAAAQ,OAAgCF,EAAAQ,QAAW,GAAAR,EAAAjC,GAAA,KAAAtB,EAAA,OAA4BgB,YAAA,cAAwBhB,EAAA,OAAYgB,YAAA,mBAA6BhB,EAAA,UAAeE,OAAO8E,UAAAzB,EAAAO,SAA0B3C,IAAKuC,MAAAH,EAAA0B,WAAqB1B,EAAAjC,GAAA,UAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,UAA4CE,OAAO8E,UAAAzB,EAAAI,UAAA,IAAAJ,EAAAI,UAA+CxC,IAAKuC,MAAAH,EAAA2B,cAAwB3B,EAAAjC,GAAA,UAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,SAAAuD,EAAAjC,GAAA,QAAAtB,EAAA,SAAsEE,OAAOe,KAAA,SAAeE,IAAKyD,MAAA,SAAAnB,GAAyBF,EAAA4B,YAAA,QAAA1B,EAAA2B,OAAAvC,aAA+CU,EAAAjC,GAAA,KAAAtB,EAAA,UAA6BE,OAAO8E,UAAAzB,EAAAO,SAA0B3C,IAAKuC,MAAAH,EAAA8B,YAAsB9B,EAAAjC,GAAA,UAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,UAA4CE,OAAO8E,UAAAzB,EAAAO,SAA0B3C,IAAKuC,MAAAH,EAAA+B,WAAqB/B,EAAAjC,GAAA,YAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,OAA2CgB,YAAA,mBAA6BhB,EAAA,SAAAA,EAAA,SAA0BE,OAAOe,KAAA,QAAAsE,KAAA,OAAAC,QAAA,IAA0CrE,IAAKC,OAAA,SAAAqC,GAA0BF,EAAA4B,YAAA,iEAA+E5B,EAAAjC,GAAA,UAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,SAAAA,EAAA,SAAuDE,OAAOe,KAAA,QAAAsE,KAAA,QAA6BpE,IAAKC,OAAA,SAAAqC,GAA0BF,EAAA4B,YAAA,0CAAwD5B,EAAAjC,GAAA,QAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,SAAAA,EAAA,SAAqDE,OAAOe,KAAA,QAAAsE,KAAA,QAA6BpE,IAAKC,OAAA,SAAAqC,GAA0BF,EAAA4B,YAAA,0CAAwD5B,EAAAjC,GAAA,QAAAiC,EAAAjC,GAAA,KAAAtB,EAAA,SAAAuD,EAAAjC,GAAA,QAAAtB,EAAA,SAAoEE,OAAOe,KAAA,WAAAsE,KAAA,UAAkCpE,IAAKC,OAAA,SAAAqC,GAA0BF,EAAA4B,YAAA,UAAA5B,EAAAb,cAAwCa,EAAAjC,GAAA,KAAAtB,EAAA,SAAAuD,EAAAjC,GAAA,OAAAtB,EAAA,SAAsDE,OAAOe,KAAA,WAAAsE,KAAA,UAAkCpE,IAAKC,OAAA,SAAAqC,GAA0BF,EAAA4B,YAAA,UAAA5B,EAAAjB,gBAAwCiB,EAAAjC,GAAA,KAAAtB,EAAA,OAA4BgB,YAAA,QAAkBhB,EAAA,SAAAA,EAAA,QAAAuD,EAAAjC,GAAA,UAAAtB,EAAA,SAAsDE,OAAOe,KAAA,SAAeE,IAAKyD,MAAA,SAAAnB,GAAyBF,EAAA4B,YAAA,WAAA1B,EAAA2B,OAAAvC,eAAkDU,EAAAjC,GAAA,KAAAtB,EAAA,OAA4BgB,YAAA,QAAkBhB,EAAA,SAAAA,EAAA,QAAAuD,EAAAjC,GAAA,WAAAtB,EAAA,SAAuDE,OAAOe,KAAA,QAAAwE,IAAA,IAAAC,KAAA,MAAAC,IAAA,KAAgDxE,IAAKyD,MAAA,SAAAnB,GAAyBF,EAAA4B,YAAA,QAAA1B,EAAA2B,OAAAvC,eAA+CU,EAAAjC,GAAA,KAAAtB,EAAA,OAA4BgB,YAAA,QAAkBhB,EAAA,SAAAA,EAAA,QAAAuD,EAAAjC,GAAA,UAAAtB,EAAA,SAAsDE,OAAOe,KAAA,QAAAwE,IAAA,MAAAC,KAAA,MAAAC,IAAA,OAAoDxE,IAAKyD,MAAA,SAAAnB,GAAyBF,EAAA4B,YAAA,aAAA1B,EAAA2B,OAAAvC,eAAoDU,EAAAjC,GAAA,KAAAiC,EAAAqC,GAAA,QAEtqGxF,iBADjB,WAAoC,IAAaP,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBgB,YAAA,QAAkBhB,EAAA,KAAUE,OAAO2F,KAAA,OAAnH/F,KAA+HwB,GAAA,oBCwBnKwE,EAtBAxF,EAAA,OAaAyF,CACApE,EACA2B,GATA,EATA,SAAA9C,GACAF,EAAA,SAYA,kBAEA,MAUA,QCrBA0F,EAAA,EAAIC,IAAIC,EAAA,GAER,IAAAC,EAAA,IAAmBD,EAAA,GACjBE,SAEIC,KAAM,IACNd,KAAM,aACNe,UAAWR,MCLjBE,EAAA,EAAIO,OAAOC,eAAgB,EAG3B,IAAIR,EAAA,GACFS,GAAI,OACJN,SACAO,SAAU,SACVC,YAAcC,IAAAvG","file":"static/js/app.d0b1da2756ad999b89b1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-31c64624\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-31c64624\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-31c64624\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <span>\n    <input type=\"file\" ref=\"input\"  @change=\"handleFileChange\" id=\"file\" class=\"inputfile\" accept=\"image/png, image/jpeg, image/gif, image/jpg\"/>\n    <label for=\"file\" :style=\"{padding:pad}\">上传图片</label>\n  </span>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        dataUrl: ''\n      }\n    },\n    methods: {\n      imgPreview (file) {\n        let self = this\n        // 看支持不支持FileReader\n        if (!file || !window.FileReader) return\n        // 创建一个reader\n        let reader = new FileReader()\n        // 将图片将转成 base64 格式\n        reader.readAsDataURL(file)\n        // 读取成功后的回调\n        reader.onloadend = function () {\n          self.dataUrl = this.result\n          self.mes = 'gggg'\n        }\n      },\n      handleFileChange (e) {\n        let file = this.$refs.input.files[0]\n        this.$emit('fileChange', file)\n      }\n    },\n    props: {\n      pad: String\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .inputfile{\n    width: 0.1px;\n    height: 0.1px;\n    opacity: 0;\n    overflow: hidden;\n  }\n   label {\n    font-weight: 700;\n    color: white;\n    background-color: rgba(3, 160, 77, 0.68);\n    cursor: pointer;\n    border-radius: 5px;\n  }\n\n  .inputfile:focus + label,\n  .inputfile + label:hover {\n    background-color: #0aceff;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/UploadBt.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('input',{ref:\"input\",staticClass:\"inputfile\",attrs:{\"type\":\"file\",\"id\":\"file\",\"accept\":\"image/png, image/jpeg, image/gif, image/jpg\"},on:{\"change\":_vm.handleFileChange}}),_vm._v(\" \"),_c('label',{style:({padding:_vm.pad}),attrs:{\"for\":\"file\"}},[_vm._v(\"上传图片\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-eb6eed26\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/UploadBt.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"container\" @mouseup=\"draggable = false\">\n    <div class=\"canvas-wrap\" ref=\"imgwrap\" @click=\"selected = false\">\n      <canvas id=\"backgroud\" ref=\"bg\" @mousemove=\"drag\"></canvas>\n      <UploadButton @fileChange=\"imgfile = arguments[0]\" pad=\"20px\" v-if=\"!imgfile\" style=\"position: absolute;\"></UploadButton>\n      <input v-if=\"imgfile\" v-for=\"(item,index)  in textArray\" @click.stop=\"select(index)\" @input=\"handleTextInput(item,$event)\" type=\"text\" :style=\"{ top: item.top, left: item.left }\" placeholder=\"单击输入拖拽\" @mousedown=\"dragBegin(index , $event)\" onfocus=\"this.style.color='transparent'\" >\n    </div>\n\n    <div class=\"card-wrap\">\n      <div class=\"row row-center\">\n        <button @click=\"addText\" :disabled=\"(!imgfile)\">增加文本</button>\n        <button @click=\"removeText\" :disabled=\"(!selected)&&(selected!==0)\">删除文本</button>\n        <label>文字颜色<input type=\"color\" @input=\"handleInput('color',$event.target.value)\"></label>\n        <button @click=\"clearImg\" :disabled=\"(!imgfile)\">全部清除</button>\n        <button @click=\"drawImg\" :disabled=\"(!imgfile)\">生成图片</button>\n      </div>\n      <div class=\"row row-center\">\n        <label><input type=\"radio\" name=\"font\" @change=\"handleInput('fontfamily','Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体')\" checked>默认字体</label>\n        <label><input type=\"radio\" name=\"font\" @change=\"handleInput('fontfamily','KaiTi,楷体,STKaiti,华文楷体')\">楷体</label>\n        <label><input type=\"radio\" name=\"font\" @change=\"handleInput('fontfamily','SimSun,宋体,STSong,华文宋体')\">宋体</label>\n        <label>文字阴影<input type=\"checkbox\" name=\"shadow\" @change=\"handleInput('shadow',!shadow)\"></label>\n        <label>空心字<input type=\"checkbox\" name=\"stroke\" @change=\"handleInput('stroke',!stroke)\"></label>\n      </div>\n      <div class=\"row\"><label><span>字体大小</span><input type=\"range\" @input=\"handleInput('fontsize',$event.target.value)\"></label></div>\n      <div class=\"row\"><label><span>文本透明度</span><input  type=\"range\" min=\"0\" step=\"0.1\" max=\"1\" @input=\"handleInput('alpha',$event.target.value)\"></label></div>\n      <div class=\"row\"><label><span>文本粗细</span><input  type=\"range\" min=\"100\" step=\"100\" max=\"900\" @input=\"handleInput('fontweight',$event.target.value)\"></label></div>\n      <div class=\"row\"><a href=\"#\">GITHUB 地址</a></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UploadButton from './UploadBt.vue'\nexport default {\n  components: {\n    UploadButton\n  },\n  name: 'HelloWorld',\n  data () {\n    return {\n      mes: 'cdc',\n      initX: 0, // 表单上的偏移量\n      initY: 0,\n      initTextX: 0, // 初始文本位置\n      initTextY: 0,\n      scaleRatio: 1, // 图片的缩放比\n      draggable: false, // 被拖拽的index\n      selected: false, // 被选中的index\n      imgfile: undefined,\n      img: '',\n      textArray: [  // 文字数组\n        {\n          fontsize: 80,\n          alpha: 1,\n          stroke: false,\n          fontweight: 400,\n          fontfamily: 'Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体',\n          content: '',\n          color: '#00DC48',\n          shadow: false,\n          left: 'auto', // 表单位置\n          top: 'auto',\n          x: 300, // 文字位置\n          y: 300\n        }],\n      fontsize: 80, // 下面为表单双向绑定值\n      alpha: 1,\n      stroke: false,\n      fontweight: 400,\n      fontfamily: 'Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体',\n      color: '#00DC48',\n      shadow: false\n    }\n  },\n  watch: {\n    // 如果 `imgflle` 发生改变，这个函数就会运行\n    imgfile: function (imgfile) {\n      let self = this\n      // 看支持不支持FileReader\n      if (!imgfile || !window.FileReader) return\n      // 创建一个reader\n      let reader = new FileReader()\n      // 将图片将转成 base64 格式\n      reader.readAsDataURL(imgfile)\n\n      // 读取成功后的回调\n      reader.onloadend = function () {\n        let img = new Image()  // 创建img元素\n        img.src = this.result // 设置图片源地址\n        img.onload = function () {\n          // 缩放图片\n          let wrapRatio = self.$refs.imgwrap.offsetWidth / self.$refs.imgwrap.offsetHeight\n          let imgRatio = img.width / img.height\n          self.$refs.bg.width = img.width\n          self.$refs.bg.height = img.height\n          self.img = img// 缓存img\n          if (wrapRatio > imgRatio) {\n            self.$refs.bg.style.height = '100%'\n            self.scaleRatio = img.height / self.$refs.imgwrap.offsetHeight// 获得缩放比例\n            self.initTextX = (self.$refs.bg.offsetWidth - 258) / 2\n            self.initTextY = (self.$refs.bg.offsetHeight - 43) / 2 + 20\n            self.textArray[0].x = (self.$refs.bg.offsetWidth - 258) / 2\n            self.textArray[0].y = (self.$refs.bg.offsetHeight - 43) / 2 + 20\n          } else {\n            self.$refs.bg.style.width = '100%'\n            self.scaleRatio = img.width / self.$refs.imgwrap.offsetWidth\n            self.initTextX = (self.$refs.bg.offsetWidth - 258) / 2\n            self.initTextY = (self.$refs.bg.offsetHeight - 43) / 2 + 20\n            self.textArray[0].x = (self.$refs.bg.offsetWidth - 258) / 2\n            self.textArray[0].y = (self.$refs.bg.offsetHeight - 43) / 2 + 20\n          }\n          self.$refs.bg.style.background = 'url(' + img.src + ')'\n        }\n      }\n    }\n  },\n  methods: {\n    addText: function () {\n      this.textArray.push({\n        fontsize: this.fontsize,\n        alpha: this.alpha,\n        stroke: this.stroke,\n        fontweight: this.fontweight,\n        fontfamily: this.fontfamily,\n        content: '',\n        color: this.color,\n        shadow: this.shadow,\n        left: 'auto',\n        top: 'auto',\n        x: this.initTextX,\n        y: this.initTextY\n      })\n    }, // 增加文字\n    handleInput: function (type, value) {\n      this[type] = value\n      if (this.selected || this.selected === 0) {\n        this.textArray[this.selected][type] = value\n        this.mes = value\n        this.draw()\n      }\n    }, // 处理表单input事件\n    removeText: function () {\n      if (this.selected || this.selected === 0) {\n        this.textArray.splice(this.selected, 1)\n        this.selected = false\n        this.draw()\n      }\n    }, // 移除文字\n    clearImg: function () {\n      this.textArray = []\n      this.draw()\n    },  // 清除画布\n    drawImg: function () {\n      let ctx = this.$refs.bg.getContext('2d')\n      let ratio = this.scaleRatio\n      let width = this.$refs.bg.width\n      let height = this.$refs.bg.height\n      ctx.clearRect(0, 0, width, height)\n      ctx.drawImage(this.img, 0, 0)\n      function drawtext (item) {\n        ctx.globalAlpha = item.alpha\n        ctx.font = item.fontweight + ' ' + item.fontsize + 'px ' + item.fontfamily\n        ctx.textBaseline = 'middle'\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)'\n        ctx.shadowOffsetX = 0\n        ctx.shadowOffsetY = 0\n        if (item.stroke) {\n          if (item.shadow) {\n            ctx.shadowColor = 'rgba(0, 0, 0, 0.8)'\n            ctx.shadowOffsetX = 10\n            ctx.shadowOffsetY = 10\n          }\n          ctx.strokeStyle = item.color\n          ctx.strokeText(item.content, item.x * ratio, item.y * ratio)\n        } else {\n          if (item.shadow) {\n            ctx.shadowColor = 'rgba(0, 0, 0, 0.2)'\n            ctx.shadowOffsetX = 10\n            ctx.shadowOffsetY = 10\n          }\n          ctx.fillStyle = item.color\n          ctx.fillText(item.content, item.x * ratio, item.y * ratio)\n        }\n      }\n      this.textArray.forEach(drawtext)\n      alert('右击图片保存')\n    }, // 生成最终图片\n    select: function (index) {\n      this.selected = index\n    }, // 选中文本框\n    dragBegin: function (index, e) {\n      this.draggable = index\n      this.initX = e.offsetX\n      this.initY = e.offsetY\n    }, // 开始拖动\n    drag: function (e) {\n      if (this.draggable || this.draggable === 0) {\n        let item = this.textArray[this.draggable]\n        item.left = e.clientX - this.initX + 'px'\n        item.top = e.clientY - this.initY + 'px'\n        item.x = e.offsetX - this.initX\n        item.y = e.offsetY - this.initY + 20\n        this.draw()\n      }\n    }, // 拖动文本框\n    handleTextInput: function (item, e) {\n      item.content = e.target.value\n      this.draw()\n    }, // 处理文本框input事件\n    draw: function () {\n      let ctx = this.$refs.bg.getContext('2d')\n      let ratio = this.scaleRatio\n      let width = this.$refs.bg.width\n      let height = this.$refs.bg.height\n      ctx.clearRect(0, 0, width, height)\n      function drawtext (item) {\n        ctx.globalAlpha = item.alpha\n        ctx.font = item.fontweight + ' ' + item.fontsize + 'px ' + item.fontfamily\n        ctx.textBaseline = 'middle'\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)'\n        ctx.shadowOffsetX = 0\n        ctx.shadowOffsetY = 0\n        if (item.stroke) {\n          if (item.shadow) {\n            ctx.shadowColor = 'rgba(0, 0, 0, 0.8)'\n            ctx.shadowOffsetX = 10\n            ctx.shadowOffsetY = 10\n          }\n          ctx.strokeStyle = item.color\n          ctx.strokeText(item.content, item.x * ratio, item.y * ratio)\n        } else {\n          if (item.shadow) {\n            ctx.shadowColor = 'rgba(0, 0, 0, 0.2)'\n            ctx.shadowOffsetX = 10\n            ctx.shadowOffsetY = 10\n          }\n          ctx.fillStyle = item.color\n          ctx.fillText(item.content, item.x * ratio, item.y * ratio)\n        }\n      }\n      this.textArray.forEach(drawtext)\n    } //  生成图片\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.container{\n  width:500px;\n  margin: auto;\n  overflow: hidden;\n  background-color: #f7fff3;\n}\n  .canvas-wrap{\n    display: flex;\n    justify-content:center;\n    height: 60vh;\n    align-items:center;\n    overflow: hidden;\n  }\n.card-wrap{\n  display: flex;\n  flex-direction: column;\n  justify-content:space-around;\n  height:40vh;\n  color: #03a04d;\n}\n.card-wrap button{\n  border-radius: 10%;\n  background-color: #d0ffde;\n}\n.row{\n  width: 100%;\n}\n.row-center {\n  display: flex;\n  justify-content:space-around;;\n}\ncanvas{\n  background-size: 100% auto!important;\n  }\ninput[type= 'color']{\n  border-radius: 50%;\n  background-color: aqua;\n  border-color: #cd1215;\n  outline: seagreen;\n}\ninput[type= 'text']{\n  caret-color: #cd615a;\n  position: absolute;\n  padding-left: 3px;\n  border: none;\n  font-size: 36px;\n  background-color:transparent;\n  width:260px;\n  user-select: none;\n}\n:-moz-placeholder { /* Mozilla Firefox 4 to 18 */\n  color: #00dc48; opacity:.8;\n}\n\n::-moz-placeholder { /* Mozilla Firefox 19+ */\n  color: #00dc48;opacity:.8;\n}\n\ninput:-ms-input-placeholder{\n  color: #00dc48;opacity:.8;\n}\n\ninput::-webkit-input-placeholder{\n  color: #00dc48;opacity:.8;\n}\ndiv canvas {\n    padding: 0;\n    margin: 0;\n    border: none;\n  }\n/*  以下滑动条样式COPY自网上 */\ninput[type=range] {\n  -webkit-appearance: none;\n  margin: 0 10px;\n  width: 80%;\n}\ninput[type=range]:focus {\n  outline: none;\n}\ninput[type=range]::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 8.4px;\n  cursor: pointer;\n  animate: 0.2s;\n  background: #02dc77;\n  border-radius: 1.3px;\n  border: 0.2px solid #0f60dc;\n}\ninput[type=range]::-webkit-slider-thumb {\n  border: 1px solid #0f60dc;\n  height: 36px;\n  width: 16px;\n  border-radius: 3px;\n  background: #ffffff;\n  cursor: pointer;\n  -webkit-appearance: none;\n  margin-top: -14px;\n}\ninput[type=range]:focus::-webkit-slider-runnable-track {\n  background: #03a04d;\n}\ninput[type=range]::-moz-range-track {\n  width: 100%;\n  height: 8.4px;\n  cursor: pointer;\n  animate: 0.2s;\n  background: #03a04d;\n  border-radius: 1.3px;\n  border: 0.2px solid #0f60dc;\n}\ninput[type=range]::-moz-range-thumb {\n  border: 1px solid #0f60dc;\n  height: 36px;\n  width: 16px;\n  border-radius: 3px;\n  background: #ffffff;\n  cursor: pointer;\n}\ninput[type=range]::-ms-track {\n  width: 100%;\n  height: 8.4px;\n  cursor: pointer;\n  animate: 0.2s;\n  background: transparent;\n  border-color: transparent;\n  border-width: 16px 0;\n  color: transparent;\n}\ninput[type=range]::-ms-fill-lower {\n  background: #03a04d;\n  border: 0.2px solid #0f60dc;\n  border-radius: 2.6px;\n}\ninput[type=range]::-ms-fill-upper {\n  background: #03a04d;\n  border: 0.2px solid #0f60dc;\n  border-radius: 2.6px;\n}\ninput[type=range]::-ms-thumb {\n  border: 1px solid #0f60dc;\n  height: 36px;\n  width: 16px;\n  border-radius: 3px;\n  background: #ffffff;\n  cursor: pointer;\n}\ninput[type=range]:focus::-ms-fill-lower {\n  background: #03a04d;\n}\ninput[type=range]:focus::-ms-fill-upper {\n  background: #03a04d;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eb6eed26\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UploadBt.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UploadBt.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eb6eed26\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./UploadBt.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-eb6eed26\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UploadBt.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",on:{\"mouseup\":function($event){_vm.draggable = false}}},[_c('div',{ref:\"imgwrap\",staticClass:\"canvas-wrap\",on:{\"click\":function($event){_vm.selected = false}}},[_c('canvas',{ref:\"bg\",attrs:{\"id\":\"backgroud\"},on:{\"mousemove\":_vm.drag}}),_vm._v(\" \"),(!_vm.imgfile)?_c('UploadButton',{staticStyle:{\"position\":\"absolute\"},attrs:{\"pad\":\"20px\"},on:{\"fileChange\":function($event){_vm.imgfile = arguments[0]}}}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.textArray),function(item,index){return (_vm.imgfile)?_c('input',{style:({ top: item.top, left: item.left }),attrs:{\"type\":\"text\",\"placeholder\":\"单击输入拖拽\",\"onfocus\":\"this.style.color='transparent'\"},on:{\"click\":function($event){$event.stopPropagation();_vm.select(index)},\"input\":function($event){_vm.handleTextInput(item,$event)},\"mousedown\":function($event){_vm.dragBegin(index , $event)}}}):_vm._e()})],2),_vm._v(\" \"),_c('div',{staticClass:\"card-wrap\"},[_c('div',{staticClass:\"row row-center\"},[_c('button',{attrs:{\"disabled\":(!_vm.imgfile)},on:{\"click\":_vm.addText}},[_vm._v(\"增加文本\")]),_vm._v(\" \"),_c('button',{attrs:{\"disabled\":(!_vm.selected)&&(_vm.selected!==0)},on:{\"click\":_vm.removeText}},[_vm._v(\"删除文本\")]),_vm._v(\" \"),_c('label',[_vm._v(\"文字颜色\"),_c('input',{attrs:{\"type\":\"color\"},on:{\"input\":function($event){_vm.handleInput('color',$event.target.value)}}})]),_vm._v(\" \"),_c('button',{attrs:{\"disabled\":(!_vm.imgfile)},on:{\"click\":_vm.clearImg}},[_vm._v(\"全部清除\")]),_vm._v(\" \"),_c('button',{attrs:{\"disabled\":(!_vm.imgfile)},on:{\"click\":_vm.drawImg}},[_vm._v(\"生成图片\")])]),_vm._v(\" \"),_c('div',{staticClass:\"row row-center\"},[_c('label',[_c('input',{attrs:{\"type\":\"radio\",\"name\":\"font\",\"checked\":\"\"},on:{\"change\":function($event){_vm.handleInput('fontfamily','Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体')}}}),_vm._v(\"默认字体\")]),_vm._v(\" \"),_c('label',[_c('input',{attrs:{\"type\":\"radio\",\"name\":\"font\"},on:{\"change\":function($event){_vm.handleInput('fontfamily','KaiTi,楷体,STKaiti,华文楷体')}}}),_vm._v(\"楷体\")]),_vm._v(\" \"),_c('label',[_c('input',{attrs:{\"type\":\"radio\",\"name\":\"font\"},on:{\"change\":function($event){_vm.handleInput('fontfamily','SimSun,宋体,STSong,华文宋体')}}}),_vm._v(\"宋体\")]),_vm._v(\" \"),_c('label',[_vm._v(\"文字阴影\"),_c('input',{attrs:{\"type\":\"checkbox\",\"name\":\"shadow\"},on:{\"change\":function($event){_vm.handleInput('shadow',!_vm.shadow)}}})]),_vm._v(\" \"),_c('label',[_vm._v(\"空心字\"),_c('input',{attrs:{\"type\":\"checkbox\",\"name\":\"stroke\"},on:{\"change\":function($event){_vm.handleInput('stroke',!_vm.stroke)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('label',[_c('span',[_vm._v(\"字体大小\")]),_c('input',{attrs:{\"type\":\"range\"},on:{\"input\":function($event){_vm.handleInput('fontsize',$event.target.value)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('label',[_c('span',[_vm._v(\"文本透明度\")]),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"step\":\"0.1\",\"max\":\"1\"},on:{\"input\":function($event){_vm.handleInput('alpha',$event.target.value)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('label',[_c('span',[_vm._v(\"文本粗细\")]),_c('input',{attrs:{\"type\":\"range\",\"min\":\"100\",\"step\":\"100\",\"max\":\"900\"},on:{\"input\":function($event){_vm.handleInput('fontweight',$event.target.value)}}})])]),_vm._v(\" \"),_vm._m(0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"GITHUB 地址\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5ddbf54e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ddbf54e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelloWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ddbf54e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5ddbf54e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport HelloWorld from '@/components/HelloWorld'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}