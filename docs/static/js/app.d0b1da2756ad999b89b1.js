webpackJsonp([1],{"9i2e":function(t,e){},Fl9v:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},s=i("VU/8")({name:"app"},n,!1,function(t){i("Fl9v")},null,null).exports,o=i("/ocq"),r={data:function(){return{dataUrl:""}},methods:{imgPreview:function(t){var e=this;if(t&&window.FileReader){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){e.dataUrl=this.result,e.mes="gggg"}}},handleFileChange:function(t){var e=this.$refs.input.files[0];this.$emit("fileChange",e)}},props:{pad:String}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("input",{ref:"input",staticClass:"inputfile",attrs:{type:"file",id:"file",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:this.handleFileChange}}),this._v(" "),e("label",{style:{padding:this.pad},attrs:{for:"file"}},[this._v("上传图片")])])},staticRenderFns:[]},f={components:{UploadButton:i("VU/8")(r,l,!1,function(t){i("9i2e")},"data-v-eb6eed26",null).exports},name:"HelloWorld",data:function(){return{mes:"cdc",initX:0,initY:0,initTextX:0,initTextY:0,scaleRatio:1,draggable:!1,selected:!1,imgfile:void 0,img:"",textArray:[{fontsize:80,alpha:1,stroke:!1,fontweight:400,fontfamily:"Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体",content:"",color:"#00DC48",shadow:!1,left:"auto",top:"auto",x:300,y:300}],fontsize:80,alpha:1,stroke:!1,fontweight:400,fontfamily:"Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体",color:"#00DC48",shadow:!1}},watch:{imgfile:function(t){var e=this;if(t&&window.FileReader){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){var t=new Image;t.src=this.result,t.onload=function(){var i=e.$refs.imgwrap.offsetWidth/e.$refs.imgwrap.offsetHeight,a=t.width/t.height;e.$refs.bg.width=t.width,e.$refs.bg.height=t.height,e.img=t,i>a?(e.$refs.bg.style.height="100%",e.scaleRatio=t.height/e.$refs.imgwrap.offsetHeight,e.initTextX=(e.$refs.bg.offsetWidth-258)/2,e.initTextY=(e.$refs.bg.offsetHeight-43)/2+20,e.textArray[0].x=(e.$refs.bg.offsetWidth-258)/2,e.textArray[0].y=(e.$refs.bg.offsetHeight-43)/2+20):(e.$refs.bg.style.width="100%",e.scaleRatio=t.width/e.$refs.imgwrap.offsetWidth,e.initTextX=(e.$refs.bg.offsetWidth-258)/2,e.initTextY=(e.$refs.bg.offsetHeight-43)/2+20,e.textArray[0].x=(e.$refs.bg.offsetWidth-258)/2,e.textArray[0].y=(e.$refs.bg.offsetHeight-43)/2+20),e.$refs.bg.style.background="url("+t.src+")"}}}}},methods:{addText:function(){this.textArray.push({fontsize:this.fontsize,alpha:this.alpha,stroke:this.stroke,fontweight:this.fontweight,fontfamily:this.fontfamily,content:"",color:this.color,shadow:this.shadow,left:"auto",top:"auto",x:this.initTextX,y:this.initTextY})},handleInput:function(t,e){this[t]=e,(this.selected||0===this.selected)&&(this.textArray[this.selected][t]=e,this.mes=e,this.draw())},removeText:function(){(this.selected||0===this.selected)&&(this.textArray.splice(this.selected,1),this.selected=!1,this.draw())},clearImg:function(){this.textArray=[],this.draw()},drawImg:function(){var t=this.$refs.bg.getContext("2d"),e=this.scaleRatio,i=this.$refs.bg.width,a=this.$refs.bg.height;t.clearRect(0,0,i,a),t.drawImage(this.img,0,0),this.textArray.forEach(function(i){t.globalAlpha=i.alpha,t.font=i.fontweight+" "+i.fontsize+"px "+i.fontfamily,t.textBaseline="middle",t.shadowColor="rgba(0, 0, 0, 0)",t.shadowOffsetX=0,t.shadowOffsetY=0,i.stroke?(i.shadow&&(t.shadowColor="rgba(0, 0, 0, 0.8)",t.shadowOffsetX=10,t.shadowOffsetY=10),t.strokeStyle=i.color,t.strokeText(i.content,i.x*e,i.y*e)):(i.shadow&&(t.shadowColor="rgba(0, 0, 0, 0.2)",t.shadowOffsetX=10,t.shadowOffsetY=10),t.fillStyle=i.color,t.fillText(i.content,i.x*e,i.y*e))}),alert("右击图片保存")},select:function(t){this.selected=t},dragBegin:function(t,e){this.draggable=t,this.initX=e.offsetX,this.initY=e.offsetY},drag:function(t){if(this.draggable||0===this.draggable){var e=this.textArray[this.draggable];e.left=t.clientX-this.initX+"px",e.top=t.clientY-this.initY+"px",e.x=t.offsetX-this.initX,e.y=t.offsetY-this.initY+20,this.draw()}},handleTextInput:function(t,e){t.content=e.target.value,this.draw()},draw:function(){var t=this.$refs.bg.getContext("2d"),e=this.scaleRatio,i=this.$refs.bg.width,a=this.$refs.bg.height;t.clearRect(0,0,i,a),this.textArray.forEach(function(i){t.globalAlpha=i.alpha,t.font=i.fontweight+" "+i.fontsize+"px "+i.fontfamily,t.textBaseline="middle",t.shadowColor="rgba(0, 0, 0, 0)",t.shadowOffsetX=0,t.shadowOffsetY=0,i.stroke?(i.shadow&&(t.shadowColor="rgba(0, 0, 0, 0.8)",t.shadowOffsetX=10,t.shadowOffsetY=10),t.strokeStyle=i.color,t.strokeText(i.content,i.x*e,i.y*e)):(i.shadow&&(t.shadowColor="rgba(0, 0, 0, 0.2)",t.shadowOffsetX=10,t.shadowOffsetY=10),t.fillStyle=i.color,t.fillText(i.content,i.x*e,i.y*e))})}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",on:{mouseup:function(e){t.draggable=!1}}},[i("div",{ref:"imgwrap",staticClass:"canvas-wrap",on:{click:function(e){t.selected=!1}}},[i("canvas",{ref:"bg",attrs:{id:"backgroud"},on:{mousemove:t.drag}}),t._v(" "),t.imgfile?t._e():i("UploadButton",{staticStyle:{position:"absolute"},attrs:{pad:"20px"},on:{fileChange:function(e){t.imgfile=arguments[0]}}}),t._v(" "),t._l(t.textArray,function(e,a){return t.imgfile?i("input",{style:{top:e.top,left:e.left},attrs:{type:"text",placeholder:"单击输入拖拽",onfocus:"this.style.color='transparent'"},on:{click:function(e){e.stopPropagation(),t.select(a)},input:function(i){t.handleTextInput(e,i)},mousedown:function(e){t.dragBegin(a,e)}}}):t._e()})],2),t._v(" "),i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"row row-center"},[i("button",{attrs:{disabled:!t.imgfile},on:{click:t.addText}},[t._v("增加文本")]),t._v(" "),i("button",{attrs:{disabled:!t.selected&&0!==t.selected},on:{click:t.removeText}},[t._v("删除文本")]),t._v(" "),i("label",[t._v("文字颜色"),i("input",{attrs:{type:"color"},on:{input:function(e){t.handleInput("color",e.target.value)}}})]),t._v(" "),i("button",{attrs:{disabled:!t.imgfile},on:{click:t.clearImg}},[t._v("全部清除")]),t._v(" "),i("button",{attrs:{disabled:!t.imgfile},on:{click:t.drawImg}},[t._v("生成图片")])]),t._v(" "),i("div",{staticClass:"row row-center"},[i("label",[i("input",{attrs:{type:"radio",name:"font",checked:""},on:{change:function(e){t.handleInput("fontfamily","Microsoft YaHei,微软雅黑, Hiragino Sans GB ,冬青黑体")}}}),t._v("默认字体")]),t._v(" "),i("label",[i("input",{attrs:{type:"radio",name:"font"},on:{change:function(e){t.handleInput("fontfamily","KaiTi,楷体,STKaiti,华文楷体")}}}),t._v("楷体")]),t._v(" "),i("label",[i("input",{attrs:{type:"radio",name:"font"},on:{change:function(e){t.handleInput("fontfamily","SimSun,宋体,STSong,华文宋体")}}}),t._v("宋体")]),t._v(" "),i("label",[t._v("文字阴影"),i("input",{attrs:{type:"checkbox",name:"shadow"},on:{change:function(e){t.handleInput("shadow",!t.shadow)}}})]),t._v(" "),i("label",[t._v("空心字"),i("input",{attrs:{type:"checkbox",name:"stroke"},on:{change:function(e){t.handleInput("stroke",!t.stroke)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("label",[i("span",[t._v("字体大小")]),i("input",{attrs:{type:"range"},on:{input:function(e){t.handleInput("fontsize",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("label",[i("span",[t._v("文本透明度")]),i("input",{attrs:{type:"range",min:"0",step:"0.1",max:"1"},on:{input:function(e){t.handleInput("alpha",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("label",[i("span",[t._v("文本粗细")]),i("input",{attrs:{type:"range",min:"100",step:"100",max:"900"},on:{input:function(e){t.handleInput("fontweight",e.target.value)}}})])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("a",{attrs:{href:"#"}},[this._v("GITHUB 地址")])])}]},d=i("VU/8")(f,h,!1,function(t){i("zPaX")},"data-v-5ddbf54e",null).exports;a.a.use(o.a);var c=new o.a({routes:[{path:"/",name:"HelloWorld",component:d}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:c,template:"<App/>",components:{App:s}})},zPaX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d0b1da2756ad999b89b1.js.map